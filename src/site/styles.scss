$fill: #222;
$stroke: #fff;
$frame-duration: 0.2s;

%flipper-wrap {
  perspective: 1000px;
  &.flipped %flipper {
    transform: rotateY(-180deg);
  }
}

%flipper {
  $easing: cubic-bezier(0.8, 0, 0.2, 1);
  position: relative;
  transition: transform 1s $easing $frame-duration;
  transform-style: preserve-3d;
}

%flipper-face {
  backface-visibility: hidden;
  position: absolute; top: 0; left: 0;
  width: 100%; height: 100%;
}

%motif {
  $size: 32px;
  background: url(assets/paw-tile.png) center no-repeat;
  content: '';
  margin: 1rem auto;
  width: $size; height: $size; display: block;
}

%prose {
  font: { family: Enriqueta, serif; size: 14px; }
  line-height: 1.8;

  header {
    &::after { @extend %motif; }
    text-align: center;
  }
  h1 {
    font: { size: 32px; weight: 500; }
    line-height: 1;
    white-space: nowrap;
  }

  a, & { color: rgba($stroke, 0.7); }
  a {
    transition: color 0.2s ease-in-out;
    &:hover { color: $stroke; }
  }

  footer {
    &::before { @extend %motif; }
    text-align: center;
  }
}

body {
  background: $fill url(assets/paw-tile.png) center;
  box-shadow: inset 0 0 200px rgba(#000, 0.4);

  margin: 0;
  position: absolute; left: 0; right: 0; top: 0; bottom: 0;
}

.frame {
  background: $fill;

  transition: {
    property: border, box-shadow;
    duration: $frame-duration;
    timing-function: ease-in;
  }
  &:not(.flipping) {
    border: 1px solid rgba(#fff, 0.1);
    box-shadow: (
      0 0 0 1px rgba(#000, 0.2),
      0 0 2px 2px rgba(#000, 0.2)
    );
  }

  width: 416px; height: 600px;

  position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);

  aside {
    position: absolute;
    top: 520px; right: -100px; width: 60px;

    color: rgba($stroke, 0.3);
    font: { family: Enriqueta, serif; size: 12px; }

    button {
      margin-bottom: 2em;
    }
  }

  @extend %flipper-wrap;
  .framed {
    @extend %flipper;
    width: inherit; height: inherit;
  }
  .game {
    @extend %flipper-face;
    transform: rotateY(0deg);
    z-index: 1;
  }
  .about {
    @extend %flipper-face;
    transform: rotateY(180deg);

    @extend %prose;
    background: $fill;
    padding: 3rem; box-sizing: border-box;
    text-align: justify;
  }
}

button {
  background: transparent;
  border: 1px solid rgba(#000, 0.4);
  border-radius: 5px;
  box-shadow: (
    inset 0 0 0 1px rgba(#fff, 0.1),
    0 0 0 1px rgba(#fff, 0.1)
  );
  color: inherit;
  cursor: pointer;
  font: inherit;
  outline: none;
  padding: 0.4em 1em 0.5em;
  body.ready & {
    transition: all 0.2s ease-in-out;
  }
  &:hover {
    background: $fill;
    color: rgba($stroke, 0.8);
  }
  &:active {
    background: lighten($fill, 10%);
  }
}

.invisible { visibility: hidden; }
